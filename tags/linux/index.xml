<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Jonathan Piedra</title>
    <link>http://jpiedra.github.io/tags/linux/index.xml</link>
    <description>Recent content on Jonathan Piedra</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <atom:link href="http://jpiedra.github.io/tags/linux/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Installing squarespace-server on Ubuntu 14.04 LTS</title>
      <link>http://jpiedra.github.io/article/squarespace-server-ubuntu/</link>
      <pubDate>Mon, 30 Jan 2017 18:11:31 -0500</pubDate>
      
      <guid>http://jpiedra.github.io/article/squarespace-server-ubuntu/</guid>
      <description>&lt;p&gt;This article details how to install the &lt;a href=&#34;http://developers.squarespace.com/local-development/&#34;&gt;Squarespace local development server&lt;/a&gt; on Ubuntu 14.04 LTS.&lt;/p&gt;

&lt;p&gt;I recently took on a small project, some work on customizing Squarespace templates. In the course of doing this, I required the Squarespace local development server in order to quickly modify and test changes to the template. I use a VirtualBox VM I built some time ago using Vagrant, based on Ubuntu 14.04 LTS.&lt;/p&gt;

&lt;p&gt;If you&amp;rsquo;ve encountered problems installing this program on the aforemention Linux distro, read on and follow these steps, as they ended up working for me very well!&lt;/p&gt;

&lt;p&gt;
&lt;h2&gt;Potential Errors&lt;/h2&gt;&lt;/p&gt;

&lt;p&gt;After following the instructions on Squarespace&amp;rsquo;s official website (link above) you might have come across the following error:&lt;/p&gt;

&lt;pre&gt;
$ npm install -g @squarespace/server
@squarespace/server@1.0.7 copyrunscript /usr/lib/node_modules/.staging/@squarespace/server-b43b0a9f
node scripts/copyfile.js build/distributions/local-developer/bin/run.bat darwin:build/distributions/local-developer/bin/osx-local-developer win32:build/distributions/local-developer/bin/win-local-developer.bat linux:build/distributions/local-developer/bin/linux-local-developer build/distributions/local-developer/bin/local-developer

copying build/distributions/local-developer/bin/linux-local-developer to build/distributions/local-developer/bin/run.bat
npm ERR! Linux 4.2.0-27-generic
npm ERR! argv &#34;/usr/bin/nodejs&#34; &#34;/usr/bin/npm&#34; &#34;install&#34; &#34;-g&#34; &#34;@squarespace/server&#34;
npm ERR! node v6.9.4
npm ERR! npm  v3.10.10
npm ERR! path ../lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat
npm ERR! code EACCES
npm ERR! errno -13
npm ERR! syscall symlink

npm ERR! Error: EACCES: permission denied, symlink &#39;../lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat&#39; -&gt; &#39;/usr/bin/squarespace-server&#39;
npm ERR!     at Error (native)
npm ERR!  { Error: EACCES: permission denied, symlink &#39;../lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat&#39; -&gt; &#39;/usr/bin/squarespace-server&#39;
npm ERR!     at Error (native)
npm ERR!   errno: -13,
npm ERR!   code: &#39;EACCES&#39;,
npm ERR!   syscall: &#39;symlink&#39;,
npm ERR!   path: &#39;../lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat&#39;,
npm ERR!   dest: &#39;/usr/bin/squarespace-server&#39; }
npm ERR! 
&lt;/pre&gt;

&lt;p&gt;This may occur if you attempt to install the program as a &lt;i&gt;user with insufficient permissions.&lt;/i&gt; Installing as root may resolve the problem, as well as &lt;a href=&#34;https://docs.npmjs.com/getting-started/fixing-npm-permissions&#34;&gt;providing the user NPM is running under with the required permissions.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However, even following that step might not end matters for you; the next error might come up:&lt;/p&gt;

&lt;pre&gt;
$ sudo npm install -g @squarespace/server
npm WARN lifecycle @squarespace/server@1.0.7~preinstall: cannot run in wd %s %s (wd=%s) @squarespace/server@1.0.7 npm run accept &amp;&amp; node scripts/execif.js --exists=build npm run copyrunscript /usr/lib/node_modules/.staging/@squarespace/server-b43b0a9f
npm ERR! Linux 4.2.0-27-generic
npm ERR! argv &#34;/usr/bin/nodejs&#34; &#34;/usr/bin/npm&#34; &#34;install&#34; &#34;-g&#34; &#34;@squarespace/server&#34;
npm ERR! node v6.9.4
npm ERR! npm  v3.10.10
npm ERR! path /usr/lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat
npm ERR! code ENOENT
npm ERR! errno -2
npm ERR! syscall chmod

npm ERR! enoent ENOENT: no such file or directory, chmod &#39;/usr/lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat&#39;
npm ERR! enoent ENOENT: no such file or directory, chmod &#39;/usr/lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat&#39;
npm ERR! enoent This is most likely not a problem with npm itself
npm ERR! enoent and is related to npm not being able to find a file.
npm ERR! enoent 
&lt;/pre&gt;

&lt;p&gt;The error messages may seem a bit opaque, but it appears that a required folder either wasn&amp;rsquo;t created or found during the installation process.&lt;/p&gt;

&lt;p&gt;&lt;h2&gt;A workaround: install &amp;ldquo;locally,&amp;rdquo; then globally&lt;/h2&gt;
I ended up having to rely on a workaround. When I say &amp;ldquo;locally&amp;rdquo; I really mean, first installing the squarespace-server dependency for a specific node project, then &lt;i&gt;moving that installation&lt;/i&gt; over to the location it must reside at in order to be used globally.&lt;/p&gt;

&lt;p&gt;Installing squarespace-server for a specific project is easy enough, just omit the global flag (-g) when you install it to your site template&amp;rsquo;s project directory. The part that might be tricky for some is &amp;ldquo;moving&amp;rdquo; the files over, as it involves not only moving the files over to a new directory, but applying permissions and creating a symbolic link as well. The presence of the symbolic link is what will allow us to launch squarespace-server globally. The steps are as follows:
&lt;ol&gt;
    &lt;li&gt;Clone the files for your Squarespace site, as instructed here: &lt;a href=&#34;http://developers.squarespace.com/local-development&#34;&gt;http://developers.squarespace.com/local-development&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;Change into the &amp;lsquo;template&amp;rsquo; directory created after cloning&lt;/li&gt;
    &lt;li&gt;Install the squarespace-server package normally (not globally)
    &lt;pre&gt;$ npm install @squarespace/server&lt;/pre&gt;
    &lt;/li&gt;
    &lt;li&gt;You should now have a directory:&lt;b&gt;template/node_modules/@squarespace&lt;/b&gt;
    &lt;/li&gt;
    &lt;li&gt;Copy the files for this module into your system-wide &amp;lsquo;node_modules&amp;rsquo; directory:
    &lt;pre&gt;$ sudo cp -rp node_modules/@squarespace /usr/lib/node_modules/&lt;/pre&gt;
    &lt;/li&gt;
    &lt;li&gt;Change the permissions for this copied folder as needed. This location will vary depending on your operating system (for our purposes, we&amp;rsquo;re using a Vagrant Box based on Ubuntu 14.04, thus the user shown below:
    &lt;pre&gt;$ sudo chown -R vagrant:root @squarespace
$ sudo chmod -R 755 @squarespace&lt;/pre&gt;
    &lt;/li&gt;
    &lt;li&gt;Finally, create a symbolic link, allowing us to run &amp;lsquo;squarespace-server&amp;rsquo; from anywhere:&lt;pre&gt;$ sudo ln -s /usr/lib/node_modules/@squarespace/server/build/distributions/local-developer/bin/run.bat /usr/bin/squarespace-server&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/p&gt;

&lt;p&gt;You should now be able to use the local development server, from inside your site&amp;rsquo;s &amp;lsquo;template&amp;rsquo; directory:
&lt;pre&gt;$ squarespace-server https://[sitename].squarespace.com &amp;ndash;auth&lt;/pre&gt;&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>