<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>
    	
  	Node.js Connector to a MySQL Database &ndash; Jonathan Piedra

    </title>
	
<link type="text/css" rel="stylesheet" href="/css/style.css">
<link type="text/css" rel="stylesheet" href="/css/blogpanel.css">
<link type="text/css" rel="stylesheet" href="/css/projectpanel.css">
<link type="text/css" rel="stylesheet" href="/css/resp.css">
<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito|Roboto|Montserrat">
</head>
<body>
	<ul class="navbar">
	<div class="navbar-left">
		<li class="navbar_brand">
			<a href="http://jpiedra.github.io">Jonathan Piedra</a>
		</li>
	</div>
	<div class="navbar-right">
		<li>
			<a href="http://jpiedra.github.io/article">Articles</a>
		</li>
		<li>
			<a href="http://jpiedra.github.io/project">Projects</a>
		</li>
		<li>
			<a href="mailto:jpiedra1990@gmail.com">Contact</a>
		</li>
	</div>
</ul>
	<div class="col-main">
		
	<div class="blogpanel blogpanel_single">
		<div class="blogpanel_head">
			<div class="blogpanel_head-date">
				<h1>July 26 2018</h1>
			</div>
			<div class="blogpanel_head-title">
				<h1>Node.js Connector to a MySQL Database</h1>
			</div>
		</div>
		<div class="blogpanel_body">
			<p><p>A simple module that connects to MySQL databases. No need to hardcode your credentials.</p>
<p>Writing reusable code is a cornerstone of development: if you can solve a problem once, and solve it well, you don&rsquo;t have to solve it again.</p>
<p>Today we&rsquo;ll demonstrate this concept using a module I wrote to develop a NodeJS API backend. This module reads a configuration file, which has two configuration objects defined. You use an environment variable to indicate whether your app is running in production or development; consequently, the module will use the config object corresponding to the environment defined by said variable.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>As stated, the connection is based on a config file we can keep elsewhere. Technically speaking, this is also a module! In this example, we use a file that lives in the root of our project, aptly named <!-- raw HTML omitted -->config.js<!-- raw HTML omitted -->:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>While there&rsquo;s nothing stopping us from hardcoding the connection data in <!-- raw HTML omitted -->database.js<!-- raw HTML omitted -->, the advantages in defining this data in a separate file are:</p>
<!-- raw HTML omitted -->
<p>Let&rsquo;s go over setting up an example app to use this code.</p>
<!-- raw HTML omitted -->
<p>After having installed <!-- raw HTML omitted -->NodeJS<!-- raw HTML omitted --> on your development environment, we can take the following steps to set up a quick example project:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>This installs the bare minimum of dependencies we would need to use our module. The package <!-- raw HTML omitted -->express-generator<!-- raw HTML omitted --> lets us scaffold an Express app very quickly, giving us an example route file we can modify to our liking. We run the command <!-- raw HTML omitted -->express .<!-- raw HTML omitted --> to scaffold that app, and then install the <!-- raw HTML omitted -->node-mysql<!-- raw HTML omitted --> dependency last as that&rsquo;s not included by default in the app we generated. The additional flag at the end saves that dependency to our <!-- raw HTML omitted -->package.json<!-- raw HTML omitted --> file.</p>
<p>At this point we should have the following directory layout:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>We still need to add the two aforementioned files. Let&rsquo;s do that now, adding <!-- raw HTML omitted -->database.js<!-- raw HTML omitted --> to a folder called <!-- raw HTML omitted -->connectors<!-- raw HTML omitted --> and <!-- raw HTML omitted -->config.js<!-- raw HTML omitted --> in the application root as previously decided. Add the above contents for each file:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>The next step is updating the configuration file to have credentials set for a local development database.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Afterwards, we modify our <!-- raw HTML omitted -->routes/users.js<!-- raw HTML omitted --> to run a query and return the results as a response. Because the Node MySQL library handles queries asynchronously (as do most libraries in NodeJS), we pass a callback to the query() method, and the callback handles what to do with the results from the query once it&rsquo;s ready:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>We can test our app, and visit a the URL defined at <!-- raw HTML omitted -->localhost:3000/users/data<!-- raw HTML omitted --> to retrieve data from a local development database, in the page response:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<blockquote>
</blockquote></p>
			<a class="blogpanel_body-more" href="http://jpiedra.github.io">Return home</a>
		</div>
		
		<div class="blogpanel_foot">
			<div class="blogpanel_foot">
				<div class="blogpanel_foot-tag-name">
					<p>Tags:</p>
				</div>
				<div class="blogpanel_foot-tag-list">
					<ul>
						
							<li>
								<a href="/tags/mysql">mysql</a>
							</li>
						
							<li>
								<a href="/tags/nodejs">nodejs</a>
							</li>
						
							<li>
								<a href="/tags/javascript">javascript</a>
							</li>
						
					</ul>
				</div>
			</div>	
		</div>
		
	</div>
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "jpiedra" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

		<div class="col-main_pages" >
			
			
		</div>
	</div>
	<div class="col-side">
		
			<div class="blogpanel">
	<div class="blogpanel_head">
		<div class="blogpanel_head-title">
			<h1>Tags</h1>
		</div>
	</div>
	<div class="blogpanel_body">
		<div class="blogpanel_foot-tag-list">
			<ul>
				
				
				
				
					<li>
						<a href="/tags/api">api</a>
					</li>
				
					<li>
						<a href="/tags/aws">aws</a>
					</li>
				
					<li>
						<a href="/tags/bash">bash</a>
					</li>
				
					<li>
						<a href="/tags/constructor">constructor</a>
					</li>
				
					<li>
						<a href="/tags/css">css</a>
					</li>
				
					<li>
						<a href="/tags/design">design</a>
					</li>
				
					<li>
						<a href="/tags/development">development</a>
					</li>
				
					<li>
						<a href="/tags/ec2">ec2</a>
					</li>
				
					<li>
						<a href="/tags/es5">es5</a>
					</li>
				
					<li>
						<a href="/tags/git">git</a>
					</li>
				
					<li>
						<a href="/tags/javascript">javascript</a>
					</li>
				
					<li>
						<a href="/tags/linux">linux</a>
					</li>
				
					<li>
						<a href="/tags/module">module</a>
					</li>
				
					<li>
						<a href="/tags/mysql">mysql</a>
					</li>
				
					<li>
						<a href="/tags/nodejs">nodejs</a>
					</li>
				
					<li>
						<a href="/tags/part-1">part-1</a>
					</li>
				
					<li>
						<a href="/tags/part-2">part-2</a>
					</li>
				
					<li>
						<a href="/tags/php">php</a>
					</li>
				
					<li>
						<a href="/tags/powershell">powershell</a>
					</li>
				
					<li>
						<a href="/tags/python">python</a>
					</li>
				
					<li>
						<a href="/tags/s3">s3</a>
					</li>
				
					<li>
						<a href="/tags/scripting">scripting</a>
					</li>
				
					<li>
						<a href="/tags/squarespace">squarespace</a>
					</li>
				
					<li>
						<a href="/tags/tips">tips</a>
					</li>
				
					<li>
						<a href="/tags/troubleshooting">troubleshooting</a>
					</li>
				
					<li>
						<a href="/tags/virtualbox">virtualbox</a>
					</li>
				
					<li>
						<a href="/tags/virtualization">virtualization</a>
					</li>
				
					<li>
						<a href="/tags/webdev">webdev</a>
					</li>
				
			</ul>
		</div>
	</div>
</div>
			<div class="blogpanel">
	<div class="blogpanel_head">
		<div class="blogpanel_head-title">
			<h1>Recent Posts</h1>
		</div>
	</div>
	<div class="blogpanel_body">
		<div class="blogpanel_foot-post-list">
			<ol>
				
				
					<li>
						<a href="http://jpiedra.github.io/article/">
							Articles - Posted Jul 26 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/tags/javascript/">
							javascript - Posted Jul 26 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/">
							Jonathan Piedra - Posted Jul 26 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/tags/mysql/">
							mysql - Posted Jul 26 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/article/mysql-connector-node/">
							Node.js Connector to a MySQL Database - Posted Jul 26 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/tags/nodejs/">
							nodejs - Posted Jul 26 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/tags/">
							Tags - Posted Jul 26 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/tags/aws/">
							aws - Posted Jul 8 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/tags/ec2/">
							ec2 - Posted Jul 8 2018
						</a>
					</li>
				
					<li>
						<a href="http://jpiedra.github.io/article/never-update-security-group/">
							Never Update an AWS Security Group Again - Posted Jul 8 2018
						</a>
					</li>
				
			</ol>
		</div>
	</div>
</div>
		
	</div>
</body>
</html>