---
layout: default
title: GiveMeItems!
tags: unrealscript
---

<div>
	<div class="page-title">
    	{{ page.title }}</div>
	</div>
	<p class="page-title-2">A mutator and GUI addon for Unreal Tournament. A Work in Progress.</p> 

<div class="col-sm-12">

<div class="div-images">
<a target="_blank" href="https://raw.githubusercontent.com/jpiedra/jpiedra.github.io/master/assets/images/gmi_a.PNG">
<img src="https://raw.githubusercontent.com/jpiedra/jpiedra.github.io/master/assets/images/gmi_a.PNG" alt="GMI_A"> </a>
	<div class="div-desc">Up to 24 item fields a user can enter.	</div>
</div>

<div class="div-images">
<a target="_blank" href="https://raw.githubusercontent.com/jpiedra/jpiedra.github.io/master/assets/images/gmi_b.PNG">
<img src="https://raw.githubusercontent.com/jpiedra/jpiedra.github.io/master/assets/images/gmi_b.PNG" alt="GMI_B"> </a>
	<div class="div-desc">Choose how often items get removed.</div>
</div>

<div class="div-images">
<a target="_blank" href="https://raw.githubusercontent.com/jpiedra/jpiedra.github.io/master/assets/images/gmi_c.PNG">
<img src="https://raw.githubusercontent.com/jpiedra/jpiedra.github.io/master/assets/images/gmi_c.PNG" alt="GMI_C"> </a>
	<div class="div-desc">Drop-down lists to choose items (WIP).</div>
</div>

</div>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	</br>
	<p class="page-title-2">Overview</p> 
	<p class="page-paragraph">GiveMeItems! is an addon for Unreal Tournament which allows in-game addition of Inventory items (health, armor, etc.) for game types which use ScriptedPawns (AI-driven monsters and enemies). The addon checks a default property of all ScriptedPawns, the DropWhenKilled property, to see whether or not that property has been set to contain an Inventory item. If it has been left unfilled, then an item is randomly selected for that property from an array of objects (of type Inventory), which are set through user-input during the game.</p>
	</br>
	<p class="page-title-2">The Mutator</p> 
	<p class="page-paragraph">Checks and control over the DropWhenKilled property of in-game enemies is achieved through two main components. The mutator is the code responsible for obtaining and assigning Inventory objects for ScriptedPawns to drop, as well as handling how frequently dropped items which have not been picked up by players are removed from the game.</p>
	<p class="page-title-2">The Window</p> 
	<p class="page-paragraph">The window component is a Graphics-User Interface which allows the user to specify Inventory objects to assign ScriptedPawns. Inventory objects obtained and assigned by the mutator are actually specified here by the user in-game. In adddition, the window component performs checks on user submitted data, evaluating whether or not a valid Inventory name has been provided, and returning an informative message in either scenario.</p>	
	</br>

	<p class="page-title-2">The Mutator</p> 
	<p class="page-paragraph">The mutator is the component added to an actual game, and is responsible for overriding default monster properties.</p>
	<div class="col-sm-12"><pre class="pre-pad" ><span class="inner-pre" style="color:#00FF99">
//=============================================================================
// GiveMeItems.
//=============================================================================
class GiveMeItems expands Mutator config(GiveMeItems);

var() config int destroyTime;
var() config String ItemChoice[24];
var class<Inventory> IVar[24];
var int i;
var float Selection;

function PreBeginPlay()
{
  log("~GiveMeItems - 6/11/2014~");
  log("Initializing Items to load for Monsters...");

  //see below.
  SetTimer(destroyTime, true);
	
  for (i = 0; i < 24; i++){
    IVar[i] = class<Inventory>(DynamicLoadObject(ItemChoice[i], class'Class'));				
    if (IVar[i] == None){
     log("GiveMeItems: Invalid Class for ItemChoice["$i$"], substituting...");
     IVar[i] = class'unrealshare.bandages';} 
    else {
	IVar[i].default.event = 'GMIMutDeleteMe';}
	    }
}


function Timer(){

  local inventory inv;

  foreach allactors(class'inventory', inv){
  if (inv.event == 'GMIMutDeleteMe' && inv.IsInState('pickup')){
	inv.destroy();}
	}
}

function bool CheckReplacement(Actor Other, out byte bSuperRelevant) 
{ 
		
  Selection = Rand(24);
		
  if (Selection < 24){
  	if(Other.IsA('ScriptedPawn') && 
	   ScriptedPawn(Other).DropWhenKilled == None){
		ScriptedPawn(Other).DropWhenKilled = IVar[Selection];} 
 				}
  return true; 
            
  }             
} </span></pre>
		</div>
	


